---
import "../styles/global.css";

import { SEO } from "astro-seo";

import SiteLayout from "./SiteLayout.astro";

const siteUrl = import.meta.env.SITE_URL || "https://deutzkrueger.de";
const appEnv = import.meta.env.APP_ENV || "development";

const allowIndexing = appEnv === "production";
const robotsContent = allowIndexing ? "index, follow" : "noindex, nofollow";

const { title, description = "Deutz & Krüger" } = Astro.props;

const isIndexPage = Astro.url.pathname === "/en" || "/de";

const DEFAULT_TITLE = "Deutz & Krüger";

const pageTitle = isIndexPage ? DEFAULT_TITLE : title || DEFAULT_TITLE;
const titleTemplate = isIndexPage ? "%s" : "%s | Astro Starter";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <SEO
      title={pageTitle}
      titleDefault={DEFAULT_TITLE}
      titleTemplate={titleTemplate}
      description={description}
      canonical={Astro.url.toString()}
      noindex={!allowIndexing}
      nofollow={!allowIndexing}
      openGraph={{
        basic: {
          title: title || DEFAULT_TITLE,
          type: "website",
          image: `${siteUrl}/og.png`,
          url: Astro.url.toString(),
        },
        image: {
          alt: DEFAULT_TITLE,
          width: 1600,
          height: 800,
          type: "image/png",
        },
        optional: {
          description,
          siteName: DEFAULT_TITLE,
          locale: "en_US",
        },
      }}
      twitter={{
        card: "summary_large_image",
        site: "",
        creator: "",
        title: title || DEFAULT_TITLE,
        description,
        image: `${siteUrl}/og.png`,
        imageAlt: DEFAULT_TITLE,
      }}
      extend={{
        meta: [
          { name: "author", content: "Deutz & Krüger" },
          {
            name: "keywords",
            content:
              "astro, web development, javascript, typescript, modern web",
          },
          { name: "googlebot", content: robotsContent },
          { name: "theme-color", content: "#000000" },
          { name: "msapplication-TileColor", content: "#000000" },
        ],
        link: [
          {
            rel: "apple-touch-icon",
            sizes: "180x180",
            href: "/apple-touch-icon.png",
          },
          {
            rel: "icon",
            type: "image/png",
            sizes: "32x32",
            href: "/favicon-32x32.png",
          },
          {
            rel: "icon",
            type: "image/png",
            sizes: "16x16",
            href: "/favicon-16x16.png",
          },
          {
            rel: "icon",
            type: "image/x-icon",
            href: "/favicon.ico",
          },
        ],
      }}
    />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="sitemap" href="/sitemap-index.xml" />
  </head>
  <body>
    <SiteLayout>
      <slot />
    </SiteLayout>
  </body>
</html>

<style>
  html,
  body {
    margin: 0;
    width: 100%;
    height: 100%;
  }
</style>
