---
// TODO: Implement ImageWrapper using <img> and srcset in combination with Cloudflare Images variants

import { cn } from "@/utils/cn";
import { getMedia } from "@/utils/media";
import { getImageSet } from "@/utils/media";

interface Props {
  src: string;
  altText: string;
  className?: string;
  loading?: string;
}

const { src, altText, className = "", loading = "lazy" } = Astro.props;

const mediaEntry = getMedia(src);
const image = getImageSet(mediaEntry.id) ?? {
  baseImage: "/public/web-app-manifest-512x512.png",
};

const loadingOrder =
  loading === "lazy" || loading === "eager" ? loading : "lazy";
---

<img
  src={image.baseImage}
  alt={altText}
  width={mediaEntry.width}
  height={mediaEntry.height}
  class={cn(className)}
  loading={loadingOrder}
/>

<!-- <img
  src={image.baseImage}
  srcset={image.srcSet}
  sizes={sizes}
  alt={altText}
  class={cn(className)}
  loading={loading}
  decoding="async"
/> -->
