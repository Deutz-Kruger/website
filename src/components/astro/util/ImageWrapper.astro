---
// TODO: Implement ImageWrapper using <img> and srcset in combination with Cloudflare Images variants

import { Image } from "astro:assets";

import { cn } from "@/utils/cn";
import { getMedia } from "@/utils/media";
import { getImageSet } from "@/utils/media";

interface Props {
  src: string;
  altText: string;
  className?: string;
  loading?: "eager" | "lazy";
  sizes?: string;
  width?: number;
}

const { src, altText, className = "", loading = "lazy" } = Astro.props;

const mediaEntry = getMedia(src);
const image = getImageSet(mediaEntry.id) ?? {
  baseImage: "/public/web-app-manifest-512x512.png",
};
---

<Image
  src={image.baseImage}
  alt={altText}
  inferSize
  class={cn(className)}
  loading={loading}
/>

<!-- <img
  src={image.baseImage}
  srcset={image.srcSet}
  sizes={sizes}
  alt={altText}
  class={cn(className)}
  loading={loading}
  decoding="async"
/> -->
