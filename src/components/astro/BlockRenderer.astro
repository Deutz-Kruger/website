---
import { type z } from "astro:content";

import { blocksUnion } from "@/content/config";

import CaseImageBlock from "./blocks/CaseImageBlock.astro";
import CaseImageFullBlock from "./blocks/CaseImageFullBlock.astro";
import CaseImageTextBlock from "./blocks/CaseImageTextBlock.astro";
import CaseImageTextFullBlock from "./blocks/CaseImageTextFullBlock.astro";
import CaseTitleBlock from "./blocks/CaseTitleBlock.astro";
import CaseVideoBlock from "./blocks/CaseVideoBlock.astro";

type Block = z.infer<typeof blocksUnion>;

interface Props {
  block: Block;
  index: number;
}

const { block, index } = Astro.props;

const loadingOrder = index < 4 ? "eager" : "lazy";
---

{block._block === "caseTitle" && <CaseTitleBlock block={block} />}
{
  block._block === "caseVideo" && (
    <CaseVideoBlock block={block} loading={loadingOrder} />
  )
}
{
  block._block === "caseImage" && (
    <CaseImageBlock block={block} loading={loadingOrder} />
  )
}
{
  block._block === "caseImageText" && (
    <CaseImageTextBlock block={block} loading={loadingOrder} />
  )
}
{
  block._block === "caseImageFull" && (
    <CaseImageFullBlock block={block} loading={loadingOrder} />
  )
}
{
  block._block === "caseImageTextFull" && (
    <CaseImageTextFullBlock block={block} loading={loadingOrder} />
  )
}
